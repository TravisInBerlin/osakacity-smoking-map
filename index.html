<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§é˜ªå¸‚ å–«ç…™æ‰€ãƒŠãƒ“</title>
    <style>
        /* è¦‹ãŸç›®ã‚’æ•´ãˆã‚‹éƒ¨åˆ†ï¼ˆCSSï¼‰ */
        body { font-family: sans-serif; background: #f4f4f4; margin: 0; padding: 15px; color: #333; line-height: 1.6; }
        h1 { font-size: 22px; text-align: center; color: #2c3e50; margin-bottom: 20px; }
        
        .btn-main {
            display: block; width: 100%; background: #007bff; color: white; border: none;
            padding: 25px; font-size: 22px; font-weight: bold; border-radius: 15px; cursor: pointer;
            margin-bottom: 20px; box-shadow: 0 6px #0056b3;
        }
        .btn-main:active { margin-top: 6px; box-shadow: none; }

        #status { 
            text-align: center; margin-bottom: 20px; padding: 10px;
            background: #fff3cd; border-radius: 8px; font-weight: bold; font-size: 14px;
        }

        .spot-card {
            background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px;
            border-left: 10px solid #28a745; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .spot-name { font-size: 20px; font-weight: bold; margin-bottom: 10px; color: #333; }
        .spot-dist { font-size: 18px; color: #e67e22; font-weight: bold; margin-bottom: 15px; }
        
        .btn-go {
            display: block; text-align: center; background: #2c3e50; color: white; 
            text-decoration: none; padding: 15px; border-radius: 10px; font-weight: bold; font-size: 18px;
        }
    </style>
</head>
<body>

    <h1>ğŸš¬ å¤§é˜ªå¸‚ å–«ç…™æ‰€ãƒŠãƒ“</h1>
    
    <button class="btn-main" onclick="findMe()">ã“ã“ã‹ã‚‰è¿‘ã„é †ã«ã•ãŒã™</button>
    
    <div id="status">ä¸Šã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€è¿‘ãã®å–«ç…™æ‰€ã‚’è¡¨ç¤ºã—ã¾ã™</div>
    
    <div id="result-list"></div>

    <script>
        /* å‹•ãã‚’ä½œã‚‹éƒ¨åˆ†ï¼ˆJavaScriptï¼‰ */

        // å¤§é˜ªå¸‚ã®ä¸»ãªæŒ‡å®šå–«ç…™æ‰€ãƒ‡ãƒ¼ã‚¿
        const locations = [
            { name: "JRå¤§é˜ªé§…æ±å´å–«ç…™æ‰€", lat: 34.7024, lng: 135.4959 },
            { name: "å¤§é˜ªé§…å—å´ï¼ˆã‚µã‚¦ã‚¹ã‚²ãƒ¼ãƒˆãƒ“ãƒ«ä»˜è¿‘ï¼‰", lat: 34.7013, lng: 135.4954 },
            { name: "é˜ªæ€¥æ¢…ç”°é§…1éšå–«ç…™æ‰€", lat: 34.7055, lng: 135.4983 },
            { name: "JRå¤©ç‹å¯ºé§…åŒ—å£å–«ç…™æ‰€", lat: 34.6472, lng: 135.5139 },
            { name: "è¿‘é‰„ã‚ã¹ã®æ©‹é§…ï¼ˆåŒ—å´ï¼‰", lat: 34.6462, lng: 135.5140 },
            { name: "é›£æ³¢é§…å‰ï¼ˆå¾¡å ‚ç­‹å´ï¼‰", lat: 34.6647, lng: 135.5019 },
            { name: "å—æµ·é›£æ³¢é§…ï¼ˆãªã‚“ã°ãƒ‘ãƒ¼ã‚¯ã‚¹ä»˜è¿‘ï¼‰", lat: 34.6625, lng: 135.5010 },
            { name: "äº¬æ©‹é§…é€£çµ¡é€šè·¯å–«ç…™æ‰€", lat: 34.6963, lng: 135.5337 },
            { name: "æ·€å±‹æ©‹é§…ï¼ˆå¸‚å½¹æ‰€ä»˜è¿‘ï¼‰", lat: 34.6937, lng: 135.5016 },
            { name: "å¤§é˜ªãƒ¡ãƒˆãƒ­ æœ¬ç”ºé§…ï¼ˆ9ç•ªå‡ºå£ä»˜è¿‘ï¼‰", lat: 34.6823, lng: 135.5002 }
        ];

        function findMe() {
            const status = document.getElementById('status');
            const list = document.getElementById('result-list');
            list.innerHTML = "";
            
            if (!navigator.geolocation) {
                status.innerHTML = "âŒ ãŠä½¿ã„ã®ã‚¹ãƒãƒ›ã§ã¯ä½¿ãˆã¾ã›ã‚“";
                return;
            }

            status.innerHTML = "â³ ä»Šã„ã‚‹å ´æ‰€ã‚’ç¢ºèªä¸­...<br>ã€Œè¨±å¯ã€ãŒå‡ºãŸã‚‰OKã‚’æŠ¼ã—ã¦ãã ã•ã„";

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const userLat = position.coords.latitude;
                    const userLng = position.coords.longitude;
                    status.innerHTML = "âœ… è¿‘ã„é †ã«è¡¨ç¤ºã—ã¾ã—ãŸ";

                    // è·é›¢è¨ˆç®—ã¨ä¸¦ã³æ›¿ãˆ
                    const sorted = locations.map(spot => {
                        const dist = getDistance(userLat, userLng, spot.lat, spot.lng);
                        return { ...spot, dist };
                    }).sort((a, b) => a.dist - b.dist);

                    // çµæœã‚’è¡¨ç¤º
                    sorted.forEach(spot => {
                        const div = document.createElement('div');
                        div.className = 'spot-card';
                        div.innerHTML = `
                            <div class="spot-name">${spot.name}</div>
                            <div class="spot-dist">ã“ã“ã‹ã‚‰ç´„ ${(spot.dist / 1000).toFixed(2)} km</div>
                            <a class="btn-go" href="https://www.google.com/maps/dir/?api=1&destination=${spot.lat},${spot.lng}" target="_blank">ã“ã“ã¸è¡Œãï¼ˆåœ°å›³ãŒé–‹ãï¼‰</a>
                        `;
                        list.appendChild(div);
                    });
                },
                (error) => {
                    status.style.color = "red";
                    status.innerHTML = "<strong>ä½ç½®æƒ…å ±ãŒè¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“</strong><br>ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§ä½ç½®æƒ…å ±ã‚’ã€Œè¨±å¯ã€ã«ã—ã¦ã‹ã‚‰ã€ãƒšãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã¿ç›´ã—ã¦ãã ã•ã„ã€‚";
                },
                { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
            );
        }

        // 2ç‚¹é–“ã®è·é›¢(m)ã‚’è¨ˆç®—ã™ã‚‹æ•°å­¦çš„ãªå‡¦ç†
        function getDistance(lat1, lng1, lat2, lng2) {
            const R = 6371000;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLng = (lng2 - lng1) * Math.PI / 180;
            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLng / 2) * Math.sin(dLng / 2);
            return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        }
    </script>
</body>
</html>